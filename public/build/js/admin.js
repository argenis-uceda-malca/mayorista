function iniciarApp(){AddProducto(),ActualizarProducto(),verificarLogin(),editarTabla(),ObtenerProductoPorId(),ActualizarProductoModal()}function verificarLogin(){$("#login").on("submit",(function(t){t.preventDefault();var e=$(this).serializeArray();alert("hola"),$.ajax({type:$(this).attr("method"),data:e,url:"/login",dataType:"json",success:function(t){console.log(t);var e=t;"exito"==e.resultado&&(swal.fire("Login Exitoso","Bienvenido "+e.usuario,"success"),setTimeout((function(){window.location.href="/admin"}),600)),"error"==e.resultado&&swal.fire("Error","Password Incorrecto o Usuario No existente","error")},error:function(t){swal.fire("UPS!!!","Lo sentimos hubo un error inesperado","error")}})}))}function editarTabla(){$("#registro").DataTable({paging:!0,lengthChange:!0,searching:!0,ordering:!1,info:!0,autoWidth:!1,pageLength:20,language:{info:"Mostrando del _START_ al _END_ de _TOTAL_ resultados",emptyaTable:"No hay registros",infoEmpty:"0 Registros",search:"Buscar",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",lengthMenu:"Mostrar _MENU_ registros",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"}}})}function ObtenerProductoPorId(){$(".btnModal").on("click",(function(){var t=$(this).data("id");$.ajax({method:"POST",url:"/getInfo",data:{ventaId:t},success:function(t){var e=t;const r=JSON.parse(e);$(".del").remove();var o=$("#MyModaltable_header").find(".table tbody");r.ventas.forEach((function(t){o.append('<tr class="del"><td class="text-center">'+t.nombres+'</td><td class="text-center">'+t.apellidos+'</td><td class="text-center">'+t.telefono+'</td><td class="text-center">S/. '+t.total+"</td></tr>")}));var a=$("#MyModaltable").find(".table tbody");r.detalle.forEach((function(t){console.log(t.ventaId),a.append('<tr class="del"><td class="text-center">'+t.nombre+'</td><td class="text-center">'+t.categoria+'</td><td class="text-center">'+t.cantidad+'</td><td class="text-center">S/. '+t.precio+'</td><td class="text-center">S/. '+t.total+"</td></tr>")}))}})}))}function ActualizarProducto(){$("#editarProducto").on("submit",(function(t){t.preventDefault();var e=$(this).serializeArray();$.ajax({type:"POST",data:e,url:"/editarProducto",dataType:"json",success:function(t){console.log(t);var e=t;"exito"==e.resultado&&(swal.fire("Exito","Actualizado correctamente ","success"),setTimeout((function(){window.location.href="/viewProducto"}),600)),"error"==e.resultado&&swal.fire("Error","Error al Actualizar","error")},error:function(t){swal.fire("UPS!!!","Lo sentimos hubo un error inesperado","error")}})}))}function AddProducto(){$("#addProducto").on("submit",(function(t){t.preventDefault();var e=$(this).serializeArray();$.ajax({type:"POST",data:e,url:"/addProducto",dataType:"json",success:function(t){console.log(t);var e=t;"exito"==e.resultado&&(swal.fire("Exito","Agregado correctamente ","success"),setTimeout((function(){window.location.href="/viewProducto"}),500)),"error"==e.resultado&&swal.fire("Error","Error al agregar","error")},error:function(t){swal.fire("UPS!!!","Lo sentimos hubo un error inesperado","error")}})}))}function ActualizarProductoModal(){$(".editbtn").on("click",(function(t){$tr=$(this).closest("tr");var e=$tr.children("td").map((function(){return $(this).text()}));console.log(e[1]),$("#id").val(e[0]),$("#nombre").val(e[1]),$("#precio").val(e[2]),$("#categoria").val(e[3])}))}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));